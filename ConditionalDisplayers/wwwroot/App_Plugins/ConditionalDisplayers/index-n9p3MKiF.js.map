{"version":3,"file":"index-n9p3MKiF.js","sources":["../../../Client/src/propertyeditors/checkbox/index.ts"],"sourcesContent":["import { customElement, html, nothing, property, state } from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbPropertyEditorConfigCollection } from \"@umbraco-cms/backoffice/property-editor\";\nimport { UmbChangeEvent } from \"@umbraco-cms/backoffice/event\";\nimport { cdCheckboxPropertyInfo } from \"../manifest\";\nimport { tagPrefix } from \"../../constants\";\nimport { UUIBooleanInputEvent } from \"@umbraco-cms/backoffice/external/uui\";\nimport { CdElement } from \"../../abstractions/CdElement\";\n\nexport const elementName = `${tagPrefix}-checkbox`;\n\n@customElement(elementName)\nexport class CdCheckboxElement extends CdElement {\n    @property({ type: Boolean, attribute: true })\n    public value?: boolean;\n\n    @property({ attribute: false })\n    public set config(config: UmbPropertyEditorConfigCollection) {\n        this.configDefaultValue = config.getValueByAlias(cdCheckboxPropertyInfo.default.alias);\n        this.configShowIfChecked = config.getValueByAlias(cdCheckboxPropertyInfo.showIfChecked.alias);\n        this.configShowIfUnchecked = config.getValueByAlias(cdCheckboxPropertyInfo.showIfUnchecked.alias);\n        this.configParentPropertyAlias = config.getValueByAlias(cdCheckboxPropertyInfo.parentPropertyAlias.alias);\n        this.configIsShowLabels = config.getValueByAlias(cdCheckboxPropertyInfo.showLabels.alias);\n        this.configLabelOn = config.getValueByAlias(cdCheckboxPropertyInfo.labelOn.alias);\n        this.configLabelOff = config.getValueByAlias(cdCheckboxPropertyInfo.labelOff.alias);\n    }\n\n    @state()\n    private configDefaultValue?: boolean;\n\n    @state()\n    private configShowIfChecked?: string;\n\n    @state()\n    private configShowIfUnchecked?: string;\n\n    @state()\n    private configParentPropertyAlias?: string;\n\n    @state()\n    private configIsShowLabels?: boolean;\n\n    @state()\n    private configLabelOn?: string;\n\n    @state()\n    private configLabelOff?: string;\n\n    #__toggleValue: boolean = false;\n    @state()\n    public get toggleValue() {\n        return this.#__toggleValue;\n    }\n    private set toggleValue(newValue: boolean) {\n        newValue = newValue || false;\n        this.#__toggleValue = newValue;\n        this.value = newValue;\n        this.dispatchEvent(new UmbChangeEvent());\n    }\n\n    protected override bootstrap() {\n        this.runDisplayLogic();\n    }\n\n    protected override initDefaults() {\n        // Only treat as \"no saved value\" when truly empty/undefined/null\n        const hasSaved = this.value !== undefined && this.value !== null;\n\n        const toBool = (x: unknown): boolean => {\n            if (typeof x === \"boolean\") return x;\n            if (typeof x === \"number\") return x === 1;\n            if (typeof x === \"string\") {\n                const s = x.trim().toLowerCase();\n                return s === \"1\" || s === \"true\";\n            }\n            return false;\n        };\n\n        if (hasSaved) {\n            // Respect the saved value\n            this.toggleValue = toBool(this.value as unknown);\n        } else if (this.configDefaultValue !== undefined && this.configDefaultValue !== null) {\n            // Apply Initial value only when there's no saved value yet\n            this.toggleValue = toBool(this.configDefaultValue as unknown);\n        }\n    }\n\n    protected override runDisplayLogic() {\n        const sourceValue = this.configParentPropertyAlias\n            ? this.getParentPropertyValue(this.configParentPropertyAlias)\n            : this.toggleValue;\n\n        const isChecked = this.toBool(sourceValue);\n\n        if (isChecked) {\n            this.displayProps(this.configShowIfChecked!, this.configShowIfUnchecked!);\n        } else {\n            this.displayProps(this.configShowIfUnchecked!, this.configShowIfChecked!);\n        }\n    }\n\n    private toBool(x: unknown): boolean {\n        if (typeof x === \"boolean\") return x;\n        if (typeof x === \"number\") return x === 1;\n        if (typeof x === \"string\") {\n            const s = x.trim().toLowerCase();\n            return s === \"1\" || s === \"true\" || s === \"yes\" || s === \"on\";\n        }\n        return false;\n    }\n\n    #onChange(event: UUIBooleanInputEvent) {\n        event.stopPropagation();\n        this.toggleValue = event.target.checked;\n        this.runDisplayLogic();\n    }\n\n    render() {\n        return html`\n        <div class=\"umb-property-editor umb-boolean\">\n            <uui-toggle .checked=${this.toggleValue} @change=${this.#onChange}\n                    label=\"${(this.configIsShowLabels ? (this.toggleValue ? this.configLabelOn : this.configLabelOff) : nothing) ?? nothing}\"\n                    labelPosition=\"right\"></uui-toggle>\n        </div>\n        `;\n    }\n}\n\nexport default CdCheckboxElement;\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        [elementName]: CdCheckboxElement;\n    }\n}\n"],"names":["___toggleValue","_CdCheckboxElement_instances","onChange_fn","elementName","tagPrefix","CdCheckboxElement","CdElement","__privateAdd","config","cdCheckboxPropertyInfo","__privateGet","newValue","__privateSet","UmbChangeEvent","hasSaved","toBool","x","sourceValue","s","html","__privateMethod","nothing","event","__decorateClass","property","state","customElement","CdCheckboxElement$1"],"mappings":"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"}